# Christmas Trading í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜

## ğŸ“‹ ë¬¸ì„œ ì •ë³´
- **ì‘ì„±ì¼**: 2025-05-26
- **ë²„ì „**: 1.0
- **ìƒíƒœ**: í˜„ì¬ êµ¬í˜„ëœ ì•„í‚¤í…ì²˜ ê¸°ì¤€

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš”

### ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Christmas Trading System                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Frontend (Netlify)                                        â”‚
â”‚  â”œâ”€â”€ React + Vite                                          â”‚
â”‚  â”œâ”€â”€ Zustand (State Management)                            â”‚
â”‚  â”œâ”€â”€ Tailwind CSS                                          â”‚
â”‚  â””â”€â”€ Dark/Light Theme                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Reverse Proxy (nginx)                                     â”‚
â”‚  â”œâ”€â”€ SSL Termination                                       â”‚
â”‚  â”œâ”€â”€ Load Balancing                                        â”‚
â”‚  â””â”€â”€ API Routing                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Backend API (Node.js + Docker)                           â”‚
â”‚  â”œâ”€â”€ Express.js Framework                                  â”‚
â”‚  â”œâ”€â”€ JWT Authentication                                    â”‚
â”‚  â”œâ”€â”€ Supabase Integration                                  â”‚
â”‚  â”œâ”€â”€ WebSocket Support                                     â”‚
â”‚  â””â”€â”€ KIS API Integration                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Database (Supabase PostgreSQL)                           â”‚
â”‚  â”œâ”€â”€ User Management                                       â”‚
â”‚  â”œâ”€â”€ Trading Data                                          â”‚
â”‚  â”œâ”€â”€ Coupon System                                         â”‚
â”‚  â””â”€â”€ Referral System                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  External Services                                         â”‚
â”‚  â”œâ”€â”€ KIS API (í•œêµ­íˆ¬ìì¦ê¶Œ)                                â”‚
â”‚  â”œâ”€â”€ Telegram Bot                                          â”‚
â”‚  â””â”€â”€ Monitoring Stack                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜

### ë°°í¬ í™˜ê²½
- **í”„ë¡ íŠ¸ì—”ë“œ**: Netlify CDN (https://christmas-protocol.netlify.app/)
- **ë°±ì—”ë“œ**: Docker Container (31.220.83.213)
- **ë°ì´í„°ë² ì´ìŠ¤**: Supabase Cloud (https://qehzzsxzjijfzqkysazc.supabase.co)

### ë„¤íŠ¸ì›Œí¬ í”Œë¡œìš°
```
Internet â†’ Netlify CDN â†’ nginx (31.220.83.213:80/443)
                      â†“
                   Backend Container (christmas-backend:8000)
                      â†“
                   Supabase PostgreSQL
```

## ğŸ³ Docker ì»¨í…Œì´ë„ˆ êµ¬ì¡°

### í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ
```yaml
services:
  christmas-nginx:
    image: nginx:alpine
    ports: ["80:80", "443:443"]
    network: christmas-trading_christmas-network
    
  christmas-backend:
    image: christmas-backend-production
    ports: ["8000:8000"]
    network: christmas-trading_christmas-network
    env_file: .env.docker
    
  christmas-postgres:
    image: postgres:15-alpine
    network: christmas-trading_christmas-network
    
  christmas-redis:
    image: redis:7-alpine
    network: christmas-trading_christmas-network
    
  christmas-grafana:
    image: grafana/grafana:latest
    ports: ["3001:3000"]
    
  christmas-prometheus:
    image: prom/prometheus:latest
    ports: ["9090:9090"]
```

## ğŸ“ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

### ì„œë²„ ë””ë ‰í† ë¦¬ (/root/christmas-trading)
```
christmas-trading/
â”œâ”€â”€ backend/                 # Node.js ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ routes/             # API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ auth.js         # ì¸ì¦ API
â”‚   â”‚   â”œâ”€â”€ kis.js          # KIS API ì—°ë™
â”‚   â”‚   â”œâ”€â”€ kisApi.js       # KIS API í—¬í¼
â”‚   â”‚   â”œâ”€â”€ telegram.js     # í…”ë ˆê·¸ë¨ ë´‡
â”‚   â”‚   â”œâ”€â”€ trading.js      # ê±°ë˜ API
â”‚   â”‚   â””â”€â”€ users.js        # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”œâ”€â”€ services/           # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ supabaseAuth.js # Supabase ì¸ì¦
â”‚   â”‚   â””â”€â”€ kisApi.js       # KIS API ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ middleware/         # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â””â”€â”€ auth.js         # JWT ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”‚   â”œâ”€â”€ server.js           # ë©”ì¸ ì„œë²„ íŒŒì¼
â”‚   â”œâ”€â”€ websocket.js        # WebSocket í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ package.json        # ì˜ì¡´ì„± ê´€ë¦¬
â”‚   â””â”€â”€ Dockerfile          # Docker ë¹Œë“œ ì„¤ì •
â”œâ”€â”€ web-dashboard/          # React í”„ë¡ íŠ¸ì—”ë“œ
â”œâ”€â”€ nginx/                  # nginx ì„¤ì •
â”œâ”€â”€ config/                 # ì„¤ì • íŒŒì¼ë“¤
â”œâ”€â”€ scripts/                # ìë™í™” ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ docs/                   # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â””â”€â”€ .env.docker            # Docker í™˜ê²½ë³€ìˆ˜
```

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Framework**: React 18 + Vite
- **State Management**: Zustand
- **Styling**: Tailwind CSS
- **Build Tool**: Vite
- **Deployment**: Netlify

### Backend
- **Runtime**: Node.js 18 (Alpine)
- **Framework**: Express.js
- **Authentication**: JWT + Supabase Auth
- **WebSocket**: Socket.io
- **Container**: Docker

### Database
- **Primary**: Supabase PostgreSQL
- **Cache**: Redis (Docker)
- **Monitoring**: Prometheus + Grafana

### External APIs
- **Trading**: KIS API (í•œêµ­íˆ¬ìì¦ê¶Œ)
- **Notifications**: Telegram Bot API
- **Payments**: Toss Payments (ì˜ˆì •)

## ğŸ” ë³´ì•ˆ ì•„í‚¤í…ì²˜

### ì¸ì¦ í”Œë¡œìš°
```
1. ì‚¬ìš©ì ë¡œê·¸ì¸ â†’ Supabase Auth
2. JWT í† í° ë°œê¸‰ â†’ Backend
3. API ìš”ì²­ ì‹œ í† í° ê²€ì¦ â†’ Middleware
4. ê¶Œí•œ í™•ì¸ â†’ Route Handler
```

### ë³´ì•ˆ ê³„ì¸µ
- **SSL/TLS**: nginxì—ì„œ ì¢…ë£Œ
- **JWT**: í† í° ê¸°ë°˜ ì¸ì¦
- **CORS**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼
- **Rate Limiting**: API ìš”ì²­ ì œí•œ
- **Input Validation**: ëª¨ë“  ì…ë ¥ ë°ì´í„° ê²€ì¦

## ğŸ“Š ë°ì´í„° í”Œë¡œìš°

### ì‚¬ìš©ì ì¸ì¦
```
Frontend â†’ nginx â†’ Backend â†’ Supabase â†’ Backend â†’ Frontend
```

### ê±°ë˜ ë°ì´í„°
```
Frontend â†’ Backend â†’ KIS API â†’ Backend â†’ Supabase â†’ Frontend
```

### ì‹¤ì‹œê°„ ì•Œë¦¼
```
Backend â†’ WebSocket â†’ Frontend
Backend â†’ Telegram Bot â†’ ì‚¬ìš©ì
```

## ğŸš€ ë°°í¬ ì•„í‚¤í…ì²˜

### í˜„ì¬ ë°°í¬ ìƒíƒœ
- **Frontend**: Netlify ìë™ ë°°í¬ (GitHub ì—°ë™)
- **Backend**: Docker ìˆ˜ë™ ë°°í¬ (31.220.83.213)
- **Database**: Supabase ê´€ë¦¬í˜• ì„œë¹„ìŠ¤

### ë°°í¬ í”„ë¡œì„¸ìŠ¤
1. ì½”ë“œ ë³€ê²½ â†’ GitHub í‘¸ì‹œ
2. Frontend: Netlify ìë™ ë¹Œë“œ/ë°°í¬
3. Backend: ìˆ˜ë™ Docker ì´ë¯¸ì§€ ë¹Œë“œ/ë°°í¬
4. Database: Supabase ì½˜ì†”ì—ì„œ ìŠ¤í‚¤ë§ˆ ê´€ë¦¬

## ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### ìˆ˜í‰ í™•ì¥
- Backend: Docker Swarm ë˜ëŠ” Kubernetes
- Database: Supabase ìë™ ìŠ¤ì¼€ì¼ë§
- Cache: Redis Cluster

### ì„±ëŠ¥ ìµœì í™”
- CDN: Netlify Edge Network
- Caching: Redis + Application Level
- Database: Connection Pooling + Query Optimization

## ğŸ” ëª¨ë‹ˆí„°ë§ ì•„í‚¤í…ì²˜

### í˜„ì¬ êµ¬ì„±
- **Metrics**: Prometheus
- **Visualization**: Grafana
- **Logs**: Docker Logs
- **Health Checks**: nginx + Backend

### ëª¨ë‹ˆí„°ë§ ëŒ€ìƒ
- API ì‘ë‹µ ì‹œê°„
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒíƒœ
- ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
- ì‚¬ìš©ì í™œë™ ë¡œê·¸

## ğŸ”„ í–¥í›„ ê°œì„  ê³„íš

### Phase 2 ì•„í‚¤í…ì²˜ ê°œì„ 
1. **CI/CD íŒŒì´í”„ë¼ì¸**: GitHub Actions
2. **ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜**: Kubernetes
3. **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤**: ê¸°ëŠ¥ë³„ ì„œë¹„ìŠ¤ ë¶„ë¦¬
4. **API Gateway**: í†µí•© API ê´€ë¦¬
5. **Message Queue**: Redis Pub/Sub â†’ RabbitMQ 