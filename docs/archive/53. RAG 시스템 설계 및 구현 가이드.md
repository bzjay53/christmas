# Christmas Trading RAG ì‹œìŠ¤í…œ ì„¤ê³„ ë° êµ¬í˜„ ê°€ì´ë“œ

## ğŸ“‹ ë¬¸ì„œ ê°œìš”
ì´ ë¬¸ì„œëŠ” Christmas Trading í”„ë¡œì íŠ¸ì— RAG(Retrieval-Augmented Generation) ì‹œìŠ¤í…œì„ ë„ì…í•˜ì—¬ ì§€ëŠ¥í˜• íˆ¬ì ë¶„ì„ ë° ì˜ì‚¬ê²°ì • ì§€ì› ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•©ë‹ˆë‹¤.

## ğŸ¯ RAG ì‹œìŠ¤í…œ ëª©í‘œ

### ğŸ” ì£¼ìš” ëª©ì 
1. **ì‹¤ì‹œê°„ ì‹œì¥ ë¶„ì„**: ë‰´ìŠ¤, ê³µì‹œ, ì‹œì¥ ë°ì´í„° ê¸°ë°˜ íˆ¬ì ì¸ì‚¬ì´íŠ¸ ì œê³µ
2. **ê°œì¸í™”ëœ íˆ¬ì ì¡°ì–¸**: ì‚¬ìš©ì í¬íŠ¸í´ë¦¬ì˜¤ ê¸°ë°˜ ë§ì¶¤í˜• ì¶”ì²œ
3. **ë¦¬ìŠ¤í¬ ê´€ë¦¬**: ì‹œì¥ ë³€ë™ì„± ë¶„ì„ ë° ìœ„í—˜ ìš”ì†Œ ì‚¬ì „ ê°ì§€
4. **ìë™ ë³´ê³ ì„œ ìƒì„±**: ì¼ì¼/ì£¼ê°„/ì›”ê°„ íˆ¬ì ì„±ê³¼ ë¦¬í¬íŠ¸ ìë™ ìƒì„±

### ğŸ“Š ê¸°ëŒ€ íš¨ê³¼
- **íˆ¬ì ì •í™•ë„ í–¥ìƒ**: 30% ì´ìƒì˜ ìˆ˜ìµë¥  ê°œì„ 
- **ì˜ì‚¬ê²°ì • ì†ë„**: ì‹¤ì‹œê°„ ë¶„ì„ìœ¼ë¡œ ë¹ ë¥¸ ëŒ€ì‘
- **ë¦¬ìŠ¤í¬ ê°ì†Œ**: ì‚¬ì „ ìœ„í—˜ ê°ì§€ë¡œ ì†ì‹¤ ìµœì†Œí™”
- **ì‚¬ìš©ì ê²½í—˜**: ì§ê´€ì ì¸ AI ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤

## ğŸ—ï¸ RAG ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ğŸ”§ í•µì‹¬ ì»´í¬ë„ŒíŠ¸

```mermaid
graph TB
    A[ë°ì´í„° ìˆ˜ì§‘ ë ˆì´ì–´] --> B[ì „ì²˜ë¦¬ ë° ì„ë² ë”©]
    B --> C[ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤]
    C --> D[ê²€ìƒ‰ ì—”ì§„]
    D --> E[LLM ìƒì„± ëª¨ë¸]
    E --> F[ì‘ë‹µ í›„ì²˜ë¦¬]
    F --> G[ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤]
    
    H[ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¼] --> A
    I[íˆìŠ¤í† ë¦¬ì»¬ ë°ì´í„°] --> A
    J[ë‰´ìŠ¤ & ê³µì‹œ] --> A
    K[ì‚¬ìš©ì ë°ì´í„°] --> A
```

### ğŸ“¦ ê¸°ìˆ  ìŠ¤íƒ

#### ğŸ” ë°ì´í„° ìˆ˜ì§‘ ë° ì²˜ë¦¬
- **ì‹¤ì‹œê°„ ë°ì´í„°**: KIS API, ì›¹ ìŠ¤í¬ë˜í•‘
- **ë‰´ìŠ¤ ë°ì´í„°**: RSS í”¼ë“œ, ë‰´ìŠ¤ API
- **ì „ì²˜ë¦¬**: Python pandas, NumPy
- **ì„ë² ë”©**: OpenAI Embeddings, Sentence Transformers

#### ğŸ—„ï¸ ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤
- **ì£¼ ë°ì´í„°ë² ì´ìŠ¤**: Pinecone ë˜ëŠ” Weaviate
- **ë°±ì—… ì˜µì…˜**: Chroma, FAISS
- **ë©”íƒ€ë°ì´í„°**: PostgreSQL (Supabase)

#### ğŸ¤– LLM ë° ìƒì„±
- **ì£¼ ëª¨ë¸**: OpenAI GPT-4 ë˜ëŠ” Claude
- **ë°±ì—… ëª¨ë¸**: Llama 2, Mistral
- **íŠ¹í™” ëª¨ë¸**: FinBERT (ê¸ˆìœµ ë„ë©”ì¸)

## ğŸ“‹ êµ¬í˜„ ë‹¨ê³„ë³„ ê³„íš

### 1ë‹¨ê³„: ë°ì´í„° íŒŒì´í”„ë¼ì¸ êµ¬ì¶• (2ì£¼)
- [ ] KIS API ë°ì´í„° ìˆ˜ì§‘ ìë™í™”
- [ ] ë‰´ìŠ¤ ë° ê³µì‹œ ë°ì´í„° í¬ë¡¤ë§
- [ ] ë°ì´í„° ì •ì œ ë° í‘œì¤€í™”
- [ ] ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë° ì„¤ì •

### 2ë‹¨ê³„: ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (1ì£¼)
- [ ] Pinecone í´ëŸ¬ìŠ¤í„° ì„¤ì •
- [ ] ì„ë² ë”© ëª¨ë¸ ì„ íƒ ë° ìµœì í™”
- [ ] ì¸ë±ì‹± ì „ëµ ìˆ˜ë¦½
- [ ] ë©”íƒ€ë°ì´í„° ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### 3ë‹¨ê³„: ê²€ìƒ‰ ì‹œìŠ¤í…œ ê°œë°œ (2ì£¼)
- [ ] ì‹œë§¨í‹± ê²€ìƒ‰ ì—”ì§„ êµ¬í˜„
- [ ] í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (í‚¤ì›Œë“œ + ë²¡í„°)
- [ ] ê²€ìƒ‰ ê²°ê³¼ ë­í‚¹ ì•Œê³ ë¦¬ì¦˜
- [ ] ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° ìµœì í™”

### 4ë‹¨ê³„: LLM í†µí•© ë° í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ (2ì£¼)
- [ ] LLM API í†µí•©
- [ ] ê¸ˆìœµ ë„ë©”ì¸ íŠ¹í™” í”„ë¡¬í”„íŠ¸ ê°œë°œ
- [ ] ì‘ë‹µ í’ˆì§ˆ ê²€ì¦ ì‹œìŠ¤í…œ
- [ ] í• ë£¨ì‹œë„¤ì´ì…˜ ë°©ì§€ ë©”ì»¤ë‹ˆì¦˜

### 5ë‹¨ê³„: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ê°œë°œ (1ì£¼)
- [ ] ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
- [ ] ì‹œê°í™” ëŒ€ì‹œë³´ë“œ ì—°ë™
- [ ] ìŒì„± ì¸í„°í˜ì´ìŠ¤ (ì„ íƒì‚¬í•­)
- [ ] ëª¨ë°”ì¼ ìµœì í™”

## ğŸ”§ ê¸°ìˆ  êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### ğŸ“Š ë°ì´í„° ìˆ˜ì§‘ ëª¨ë“ˆ

```python
# backend/services/data_collector.py
class DataCollector:
    def __init__(self):
        self.kis_api = KISApiClient()
        self.news_crawler = NewsCrawler()
        self.scheduler = APScheduler()
    
    async def collect_market_data(self):
        """ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘"""
        stocks = await self.kis_api.get_stock_list()
        for stock in stocks:
            price_data = await self.kis_api.get_price_data(stock.code)
            await self.store_price_data(price_data)
    
    async def collect_news_data(self):
        """ë‰´ìŠ¤ ë° ê³µì‹œ ë°ì´í„° ìˆ˜ì§‘"""
        news_items = await self.news_crawler.get_latest_news()
        for item in news_items:
            processed_item = await self.process_news_item(item)
            await self.store_news_data(processed_item)
```

### ğŸ” ë²¡í„° ê²€ìƒ‰ ì—”ì§„

```python
# backend/services/vector_search.py
class VectorSearchEngine:
    def __init__(self):
        self.pinecone_client = pinecone.Index("christmas-trading")
        self.embedding_model = SentenceTransformer('all-MiniLM-L6-v2')
    
    async def search_similar_content(self, query: str, top_k: int = 10):
        """ì‹œë§¨í‹± ê²€ìƒ‰ ìˆ˜í–‰"""
        query_embedding = self.embedding_model.encode(query)
        
        results = self.pinecone_client.query(
            vector=query_embedding.tolist(),
            top_k=top_k,
            include_metadata=True
        )
        
        return self.format_search_results(results)
    
    async def hybrid_search(self, query: str, filters: dict = None):
        """í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (ë²¡í„° + í‚¤ì›Œë“œ)"""
        vector_results = await self.search_similar_content(query)
        keyword_results = await self.keyword_search(query, filters)
        
        return self.merge_search_results(vector_results, keyword_results)
```

### ğŸ¤– RAG ìƒì„± ëª¨ë¸

```python
# backend/services/rag_generator.py
class RAGGenerator:
    def __init__(self):
        self.llm_client = OpenAI()
        self.search_engine = VectorSearchEngine()
        self.prompt_templates = PromptTemplates()
    
    async def generate_investment_advice(self, user_query: str, user_context: dict):
        """íˆ¬ì ì¡°ì–¸ ìƒì„±"""
        # 1. ê´€ë ¨ ì •ë³´ ê²€ìƒ‰
        relevant_docs = await self.search_engine.search_similar_content(user_query)
        
        # 2. ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±
        context = self.build_context(relevant_docs, user_context)
        
        # 3. í”„ë¡¬í”„íŠ¸ ìƒì„±
        prompt = self.prompt_templates.investment_advice_prompt(
            query=user_query,
            context=context,
            user_profile=user_context
        )
        
        # 4. LLM ì‘ë‹µ ìƒì„±
        response = await self.llm_client.chat.completions.create(
            model="gpt-4",
            messages=[{"role": "user", "content": prompt}],
            temperature=0.3
        )
        
        return self.post_process_response(response.choices[0].message.content)
```

## ğŸ“Š ë°ì´í„° ì†ŒìŠ¤ ë° ì²˜ë¦¬

### ğŸ“ˆ ì‹œì¥ ë°ì´í„°
- **ì£¼ì‹ ê°€ê²©**: ì‹¤ì‹œê°„ í˜¸ê°€, ì²´ê²°ê°€, ê±°ë˜ëŸ‰
- **ì§€ìˆ˜ ë°ì´í„°**: KOSPI, KOSDAQ, ì„¹í„°ë³„ ì§€ìˆ˜
- **ê±°ì‹œê²½ì œ**: ê¸ˆë¦¬, í™˜ìœ¨, ì›ìì¬ ê°€ê²©
- **ê¸°ì—… ì¬ë¬´**: ì¬ë¬´ì œí‘œ, ì‹¤ì  ë°œí‘œ, ë°¸ë¥˜ì—ì´ì…˜

### ğŸ“° ë‰´ìŠ¤ ë° ì •ë³´
- **ë‰´ìŠ¤ ì†ŒìŠ¤**: ì—°í•©ë‰´ìŠ¤, í•œêµ­ê²½ì œ, ë§¤ì¼ê²½ì œ
- **ê³µì‹œ ì •ë³´**: DART ì „ìê³µì‹œ, ê¸°ì—… IR
- **ì• ë„ë¦¬ìŠ¤íŠ¸ ë¦¬í¬íŠ¸**: ì¦ê¶Œì‚¬ ë¦¬ì„œì¹˜ ë³´ê³ ì„œ
- **ì†Œì…œ ë¯¸ë””ì–´**: íŠ¸ìœ„í„°, ë„¤ì´ë²„ ì¹´í˜ (ê°ì • ë¶„ì„)

### ğŸ”„ ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸

```python
# backend/services/data_pipeline.py
class DataPipeline:
    def __init__(self):
        self.collectors = [
            MarketDataCollector(),
            NewsDataCollector(),
            SocialDataCollector()
        ]
        self.processors = [
            DataCleaner(),
            SentimentAnalyzer(),
            TechnicalIndicatorCalculator()
        ]
        self.embedder = EmbeddingGenerator()
    
    async def process_data_batch(self, data_batch):
        """ë°ì´í„° ë°°ì¹˜ ì²˜ë¦¬"""
        # 1. ë°ì´í„° ì •ì œ
        cleaned_data = await self.clean_data(data_batch)
        
        # 2. íŠ¹ì„± ì¶”ì¶œ
        features = await self.extract_features(cleaned_data)
        
        # 3. ì„ë² ë”© ìƒì„±
        embeddings = await self.embedder.generate_embeddings(features)
        
        # 4. ë²¡í„° DB ì €ì¥
        await self.store_embeddings(embeddings)
        
        return processed_data
```

## ğŸ¯ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§

### ğŸ“ íˆ¬ì ì¡°ì–¸ í”„ë¡¬í”„íŠ¸

```python
INVESTMENT_ADVICE_PROMPT = """
ë‹¹ì‹ ì€ ì „ë¬¸ì ì¸ íˆ¬ì ë¶„ì„ê°€ì…ë‹ˆë‹¤. ë‹¤ìŒ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ íˆ¬ì ì¡°ì–¸ì„ ì œê³µí•´ì£¼ì„¸ìš”.

## ì‚¬ìš©ì ì§ˆë¬¸
{user_query}

## ê´€ë ¨ ì‹œì¥ ì •ë³´
{market_context}

## ì‚¬ìš©ì í”„ë¡œí•„
- íˆ¬ì ì„±í–¥: {risk_profile}
- íˆ¬ì ê²½í—˜: {experience_level}
- íˆ¬ì ëª©í‘œ: {investment_goal}
- í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤: {current_portfolio}

## ë¶„ì„ ìš”êµ¬ì‚¬í•­
1. í˜„ì¬ ì‹œì¥ ìƒí™© ë¶„ì„
2. íˆ¬ì ê¸°íšŒ ë° ë¦¬ìŠ¤í¬ í‰ê°€
3. êµ¬ì²´ì ì¸ íˆ¬ì ì „ëµ ì œì•ˆ
4. ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë°©ì•ˆ

## ì‘ë‹µ í˜•ì‹
- ê°„ê²°í•˜ê³  ëª…í™•í•œ ì„¤ëª…
- êµ¬ì²´ì ì¸ ìˆ˜ì¹˜ì™€ ê·¼ê±° ì œì‹œ
- ì‹¤í–‰ ê°€ëŠ¥í•œ ì•¡ì…˜ ì•„ì´í…œ
- ì£¼ì˜ì‚¬í•­ ë° ë©´ì±… ì¡°í•­

íˆ¬ì ì¡°ì–¸:
"""
```

### ğŸ” ì‹œì¥ ë¶„ì„ í”„ë¡¬í”„íŠ¸

```python
MARKET_ANALYSIS_PROMPT = """
ë‹¤ìŒ ì‹œì¥ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ íˆ¬ì ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”.

## ì‹œì¥ ë°ì´í„°
{market_data}

## ë‰´ìŠ¤ ë° ì´ë²¤íŠ¸
{news_events}

## ê¸°ìˆ ì  ì§€í‘œ
{technical_indicators}

## ë¶„ì„ ê²°ê³¼ ìš”êµ¬ì‚¬í•­
1. ì‹œì¥ íŠ¸ë Œë“œ ë¶„ì„
2. ì£¼ìš” ì˜í–¥ ìš”ì¸
3. ë‹¨ê¸°/ì¤‘ê¸° ì „ë§
4. íˆ¬ì ê¸°íšŒ ë°œêµ´

ë¶„ì„ ê²°ê³¼:
"""
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

### ğŸ“Š ì„±ëŠ¥ ë©”íŠ¸ë¦­
- **ê²€ìƒ‰ ì •í™•ë„**: Precision@K, Recall@K
- **ì‘ë‹µ í’ˆì§ˆ**: BLEU, ROUGE, ì „ë¬¸ê°€ í‰ê°€
- **ì‘ë‹µ ì‹œê°„**: < 3ì´ˆ ëª©í‘œ
- **ì‚¬ìš©ì ë§Œì¡±ë„**: 5ì  ì²™ë„ 4.0 ì´ìƒ

### ğŸ”¬ A/B í…ŒìŠ¤íŠ¸ ê³„íš
- **ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜**: ë²¡í„° vs í•˜ì´ë¸Œë¦¬ë“œ
- **LLM ëª¨ë¸**: GPT-4 vs Claude vs Llama
- **í”„ë¡¬í”„íŠ¸ ì „ëµ**: ë‹¤ì–‘í•œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ë¹„êµ
- **UI/UX**: ì±„íŒ… vs ëŒ€ì‹œë³´ë“œ ì¸í„°í˜ì´ìŠ¤

## ğŸš€ ë°°í¬ ë° ìš´ì˜

### ğŸ—ï¸ ì¸í”„ë¼ êµ¬ì„±
- **ì»´í“¨íŒ…**: AWS EC2 GPU ì¸ìŠ¤í„´ìŠ¤
- **ìŠ¤í† ë¦¬ì§€**: S3 (ì›ë³¸ ë°ì´í„°), Pinecone (ë²¡í„°)
- **ìºì‹±**: Redis (ê²€ìƒ‰ ê²°ê³¼ ìºì‹±)
- **ëª¨ë‹ˆí„°ë§**: CloudWatch, Grafana

### ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­
- **ìˆ˜í‰ í™•ì¥**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜
- **ë¡œë“œ ë°¸ëŸ°ì‹±**: API Gateway + ALB
- **ë°ì´í„° íŒŒí‹°ì…”ë‹**: ì‹œê°„/ì¢…ëª©ë³„ ë¶„í• 
- **ìºì‹± ì „ëµ**: ë‹¤ì¸µ ìºì‹± êµ¬ì¡°

## ğŸ’° ë¹„ìš© ìµœì í™”

### ğŸ’¸ ì˜ˆìƒ ë¹„ìš© (ì›”ê°„)
- **LLM API**: $500-1000 (ì‚¬ìš©ëŸ‰ ê¸°ë°˜)
- **ë²¡í„° DB**: $200-500 (Pinecone)
- **ì¸í”„ë¼**: $300-800 (AWS)
- **ë°ì´í„° ì†ŒìŠ¤**: $100-300 (ë‰´ìŠ¤ API ë“±)

### ğŸ¯ ìµœì í™” ì „ëµ
- **ìºì‹±**: ì¤‘ë³µ ìš”ì²­ ë°©ì§€
- **ë°°ì¹˜ ì²˜ë¦¬**: API í˜¸ì¶œ ìµœì†Œí™”
- **ëª¨ë¸ ìµœì í™”**: ê²½ëŸ‰í™”ëœ ëª¨ë¸ ì‚¬ìš©
- **ìŠ¤ì¼€ì¤„ë§**: ë¹„ìš© íš¨ìœ¨ì ì¸ ì‹œê°„ëŒ€ í™œìš©

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ ë§í¬
- [í”„ë¡œì íŠ¸ êµ¬ì¡°ë„](./47.%20í”„ë¡œì íŠ¸%20êµ¬ì¡°ë„.md)
- [ì˜ì¡´ì„± ê´€ë¦¬ ë¬¸ì„œ](./48.%20ì˜ì¡´ì„±%20ê´€ë¦¬%20ë¬¸ì„œ.md)
- [ë³´ì•ˆ ê°€ì´ë“œë¼ì¸](./49.%20ë³´ì•ˆ%20ê°€ì´ë“œë¼ì¸.md)
- [í…ŒìŠ¤íŠ¸ ì „ëµ ë¬¸ì„œ](./50.%20í…ŒìŠ¤íŠ¸%20ì „ëµ%20ë¬¸ì„œ.md)

## ğŸ“ ì—…ë°ì´íŠ¸ ì´ë ¥
- 2024-12-25: ì´ˆê¸° RAG ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œ ìƒì„±
- í–¥í›„ ì—…ë°ì´íŠ¸ ì˜ˆì •

---
**âš ï¸ ì¤‘ìš”**: RAG ì‹œìŠ¤í…œì€ íˆ¬ì ì°¸ê³ ìš©ì´ë©°, ìµœì¢… íˆ¬ì ê²°ì •ì€ ì‚¬ìš©ìì˜ ì±…ì„ì…ë‹ˆë‹¤. 