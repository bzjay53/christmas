# Christmas 프로젝트 아키텍처 문서

## 1. 시스템 개요

Christmas 프로젝트는 모듈식 아키텍처를 기반으로 한 웹 애플리케이션입니다. 주요 구성 요소는 다음과 같습니다:

- 웹 인터페이스 (Frontend)
- 백엔드 API 서버
- 알림 모듈
- 데이터베이스
- 캐시 시스템
- RAG 시스템 (검색 기반 생성형 문서 처리)

## 2. 시스템 아키텍처

### 2.1 전체 아키텍처

```
[Client] <-> [Nginx] <-> [Web Interface] <-> [Backend API] <-> [Database/Cache]
                     <-> [Notification Module]
                     <-> [RAG Web Interface] <-> [RAG API] <-> [Vector Database]
```

### 2.2 주요 컴포넌트

#### 2.2.1 웹 인터페이스
- Next.js 기반의 프론트엔드 애플리케이션
- 서버 사이드 렌더링 (SSR) 지원
- 반응형 디자인

#### 2.2.2 백엔드 API
- FastAPI 기반의 RESTful API
- 비동기 처리 지원
- 모듈식 구조

#### 2.2.3 알림 모듈
- 실시간 알림 처리
- 이메일 알림 지원
- 웹소켓 기반 실시간 통신

#### 2.2.4 데이터베이스
- PostgreSQL
- 데이터 영속성
- 트랜잭션 관리

#### 2.2.5 캐시 시스템
- Redis
- 세션 관리
- 성능 최적화

#### 2.2.6 RAG 시스템
- Weaviate 벡터 데이터베이스
- 문서 색인 및 검색 기능
- OpenAI 기반 LLM 응답 생성
- 모듈화된 구조 (검색기, 색인기, 생성기)
- Express.js 기반 웹 인터페이스
- FastAPI 기반 RESTful API

## 3. 배포 아키텍처

### 3.1 Docker 컨테이너 구성
- 각 컴포넌트는 독립적인 Docker 컨테이너로 실행
- Docker Compose를 통한 컨테이너 오케스트레이션
- 환경별 설정 분리 (개발, 테스트, 운영)
- RAG 시스템용 별도 Docker Compose 파일

### 3.2 CI/CD 파이프라인
- GitHub Actions를 통한 자동화된 빌드 및 배포
- 테스트 자동화
- 코드 품질 검사

## 4. 보안 아키텍처

### 4.1 인증 및 인가
- JWT 기반 인증
- 역할 기반 접근 제어 (RBAC)
- OAuth2.0 지원

### 4.2 데이터 보안
- HTTPS/TLS 암호화
- 데이터 암호화 저장
- 보안 헤더 설정

## 5. 모니터링 및 로깅

### 5.1 모니터링
- Prometheus 메트릭 수집
- Grafana 대시보드
- 알림 설정

### 5.2 로깅
- ELK 스택 기반 로그 관리
- 구조화된 로그 포맷
- 로그 보관 정책

## 6. 확장성 및 고가용성

### 6.1 수평적 확장
- 무상태(Stateless) 아키텍처
- 로드 밸런싱
- 자동 스케일링

### 6.2 고가용성
- 다중 가용 영역 배포
- 장애 복구 전략
- 백업 및 복구 계획 

## 7. RAG 시스템 아키텍처

### 7.1 RAG 시스템 개요
RAG(Retrieval-Augmented Generation) 시스템은 프로젝트 문서를 벡터화하여 검색하고, 관련 문서 컨텍스트를 활용해 질의에 응답하는 시스템입니다.

### 7.2 RAG 시스템 컴포넌트

#### 7.2.1 벡터 데이터베이스 (Weaviate)
- 문서 색인 저장 및 벡터 검색
- 의미 기반 검색 기능 제공
- OpenAI 임베딩 모델 연동

#### 7.2.2 문서 처리 파이프라인
- 마크다운 문서 파싱
- 청크 분할 및 전처리
- 메타데이터 추출 및 관리

#### 7.2.3 RAG API
- FastAPI 기반 RESTful API
- 문서 검색 엔드포인트
- 질의 응답 엔드포인트
- 색인 관리 엔드포인트

#### 7.2.4 RAG 웹 인터페이스
- Express.js 기반 웹 서버
- 사용자 친화적 UI
- 실시간 질의 응답 기능

### 7.3 RAG 시스템 데이터 흐름

```
[문서] -> [청크 분할] -> [벡터 변환] -> [벡터 DB 저장]
                                         |
[사용자 질의] -> [벡터 변환] -> [유사도 검색] -> [관련 문서 검색]
                                                 |
                                          [LLM 컨텍스트 구성]
                                                 |
                                           [응답 생성]
                                                 |
                                           [사용자 응답]
```

### 7.4 RAG 시스템 배포 구성
- Weaviate 컨테이너: 벡터 데이터베이스
- RAG API 컨테이너: 검색 및 생성 API
- RAG 웹 컨테이너: 사용자 인터페이스
- 볼륨 마운트: 문서 및 색인 데이터 영속성 